<template>
  <div class="cleanup-guide">
    <h3>ğŸ”§ HÆ°á»›ng dáº«n kháº¯c phá»¥c lá»—i 401</h3>
    
    <div class="cleanup-steps">
      <div class="step">
        <h4>ğŸ“‹ CÃ¡ch 1: Sá»­ dá»¥ng Debug Panel</h4>
        <p>1. VÃ o trang Profile</p>
        <p>2. Click nÃºt "Force Cleanup"</p>
        <p>3. Confirm Ä‘á»ƒ clear data</p>
        <p>4. Page sáº½ tá»± Ä‘á»™ng reload</p>
      </div>
      
      <div class="step">
        <h4>ğŸ’» CÃ¡ch 2: Manual Console</h4>
        <p>1. Má»Ÿ Developer Tools (F12)</p>
        <p>2. VÃ o tab Console</p>
        <p>3. Copy vÃ  paste script bÃªn dÆ°á»›i:</p>
        <div class="code-block">
          <code>import('./src/utils/manual-cleanup.js')</code>
        </div>
        <button @click="copyScript" class="copy-btn">ğŸ“‹ Copy Script</button>
      </div>
      
      <div class="step">
        <h4>ğŸ”„ CÃ¡ch 3: Hard Refresh</h4>
        <p>1. Nháº¥n Ctrl + Shift + R (Windows)</p>
        <p>2. Hoáº·c Cmd + Shift + R (Mac)</p>
        <p>3. Hoáº·c Ctrl + F5</p>
      </div>
      
      <div class="step">
        <h4>ğŸŒ CÃ¡ch 4: Clear Browser Data</h4>
        <p>1. VÃ o Settings > Privacy</p>
        <p>2. Clear browsing data</p>
        <p>3. Chá»n "All time"</p>
        <p>4. Check "Cookies" vÃ  "Cached data"</p>
      </div>
    </div>
    
    <div class="troubleshooting">
      <h4>ğŸš¨ Náº¿u váº«n khÃ´ng Ä‘Æ°á»£c:</h4>
      <ul>
        <li>Kiá»ƒm tra Keycloak server cÃ³ Ä‘ang cháº¡y khÃ´ng (localhost:8180)</li>
        <li>Kiá»ƒm tra realm "tiez-shop" cÃ³ tá»“n táº¡i khÃ´ng</li>
        <li>Kiá»ƒm tra client "tienngv" cÃ³ Ä‘Æ°á»£c cáº¥u hÃ¬nh Ä‘Ãºng khÃ´ng</li>
        <li>Thá»­ restart Keycloak server</li>
      </ul>
    </div>
  </div>
</template>

<script setup>
const copyScript = () => {
  const script = `import('./src/utils/manual-cleanup.js')`;
  navigator.clipboard.writeText(script).then(() => {
    alert('Script Ä‘Ã£ Ä‘Æ°á»£c copy! Paste vÃ o console vÃ  nháº¥n Enter');
  }).catch(() => {
    // Fallback for older browsers
    const textArea = document.createElement('textarea');
    textArea.value = script;
    document.body.appendChild(textArea);
    textArea.select();
    document.execCommand('copy');
    document.body.removeChild(textArea);
    alert('Script Ä‘Ã£ Ä‘Æ°á»£c copy! Paste vÃ o console vÃ  nháº¥n Enter');
  });
};
</script>

<style scoped>
.cleanup-guide {
  background: #f8f9fa;
  border: 1px solid #dee2e6;
  border-radius: 8px;
  padding: 1.5rem;
  margin: 1rem 0;
}

.cleanup-steps {
  display: grid;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.step {
  background: white;
  border: 1px solid #e9ecef;
  border-radius: 6px;
  padding: 1rem;
}

.step h4 {
  color: #495057;
  margin-bottom: 0.5rem;
}

.step p {
  margin: 0.25rem 0;
  color: #6c757d;
}

.code-block {
  background: #f8f9fa;
  border: 1px solid #e9ecef;
  border-radius: 4px;
  padding: 0.5rem;
  margin: 0.5rem 0;
  font-family: 'Courier New', monospace;
}

.copy-btn {
  background: #007bff;
  color: white;
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 4px;
  cursor: pointer;
  margin-top: 0.5rem;
}

.copy-btn:hover {
  background: #0056b3;
}

.troubleshooting {
  background: #fff3cd;
  border: 1px solid #ffeaa7;
  border-radius: 6px;
  padding: 1rem;
}

.troubleshooting h4 {
  color: #856404;
  margin-bottom: 0.5rem;
}

.troubleshooting ul {
  margin: 0;
  padding-left: 1.5rem;
}

.troubleshooting li {
  color: #856404;
  margin: 0.25rem 0;
}
</style>
